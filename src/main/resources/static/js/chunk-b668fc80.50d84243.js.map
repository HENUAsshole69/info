{"version":3,"sources":["webpack:///./src/client/StaticPageClient.ts","webpack:///./src/views/StaticEdit.vue?d52b","webpack:///src/views/StaticEdit.vue","webpack:///./src/views/StaticEdit.vue?bf76","webpack:///./src/views/StaticEdit.vue?6c67","webpack:///./src/views/StaticEdit.vue?376e"],"names":["StaticPageClient","article","title","post","headers","id","get","responseType","data","delete","put","render","_vm","this","_h","$createElement","_c","_self","attrs","loading","on","$event","$router","go","_v","_s","save","directives","name","rawName","value","expression","ref","staticStyle","staticClass","_e","staticRenderFns","scrollingContainer","theme","modules","component"],"mappings":"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","file":"js/chunk-b668fc80.50d84243.js","sourcesContent":["import {Article, Type} from \"@/model/Article\";\r\nimport AxiosInstance from \"@/client/AxiosInstance\";\r\nimport {StaticPage} from \"@/model/StaticPage\";\r\n\r\nexport class StaticPageClient {\r\n    static postEntry(article: string, title: string){\r\n        return AxiosInstance.post('/static/page/'+title,article,{\r\n            headers: { 'Content-Type': 'text/plain' }\r\n        })\r\n    }\r\n    static async getStaticPage(id: number){\r\n        return await AxiosInstance.get('/static/page/'+id,{ responseType: 'text' })\r\n    }\r\n\r\n    static async getStaticPageDto(id: number): Promise<StaticPage>{\r\n        return (await AxiosInstance.get('/static/page/'+id+'/dto',{  })).data as StaticPage\r\n    }\r\n    static async delStaticPage(id: number){\r\n        return await AxiosInstance.delete('/static/page/'+id,{  })\r\n    }\r\n    static async getStaticPageDtoList(): Promise<StaticPage[]>{\r\n        return (await AxiosInstance.get('/static/page/list',{  })).data as StaticPage[]\r\n    }\r\n    static updateEntry(article: string, id: number){\r\n        return AxiosInstance.put('/static/page/'+id,article,{\r\n            headers: { 'Content-Type': 'text/plain' }\r\n        })\r\n    }\r\n    static async publish(id: number){\r\n        return await AxiosInstance.put('/static/page/'+id+'/publish')\r\n    }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-toolbar',{attrs:{\"dark\":\"\",\"color\":\"primary\"}},[_c('v-btn',{attrs:{\"icon\":\"\",\"disabled\":_vm.loading,\"dark\":\"\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-toolbar-title',[_vm._v(_vm._s(_vm.article === null ? '':_vm.article.title))]),_c('v-spacer'),_c('v-toolbar-items',[_c('v-btn',{attrs:{\"dark\":\"\",\"disabled\":_vm.loading,\"text\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1),_c('v-container',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading),expression:\"!loading\"}]},[_c('v-row',[_c('v-col',[_c('div',{ref:\"editor\",staticStyle:{\"height\":\"100%\"}})])],1)],1),(_vm.loading)?_c('div',{staticClass:\"center\"},[_c('v-progress-circular',{staticClass:\"center\",attrs:{\"size\":50,\"color\":\"primary\",\"indeterminate\":\"\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <v-toolbar dark color=\"primary\">\r\n            <v-btn icon  :disabled=\"loading\"  dark @click=\"$router.go(-1)\">\r\n                <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n            <v-toolbar-title>{{article === null ? '':article.title}}</v-toolbar-title>\r\n            <v-spacer></v-spacer>\r\n            <v-toolbar-items>\r\n                <v-btn dark :disabled=\"loading\" text @click=\"save\">保存</v-btn>\r\n            </v-toolbar-items>\r\n        </v-toolbar>\r\n        <v-container v-show=\"!loading\">\r\n            <v-row>\r\n                <v-col>\r\n                    <div ref=\"editor\" style=\"height: 100%\"></div>\r\n                </v-col>\r\n            </v-row>\r\n        </v-container>\r\n        <div class=\"center\" v-if=\"loading\">\r\n            <v-progress-circular\r\n                    :size=\"50\"\r\n                    color=\"primary\"\r\n                    indeterminate\r\n                    class=\"center\"\r\n            ></v-progress-circular>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {ArticleClient} from \"../client/ArticleClient\";\r\n    import Quill from \"quill\";\r\n    import {StaticPageClient} from \"../client/StaticPageClient\";\r\n    import  ImageResize  from 'quill-image-resize-module';\r\n    import { ImageDrop } from 'quill-image-drop-module';\r\n    export default {\r\n        name: \"StaticEdit\",\r\n        props:{\r\n            id: String\r\n        },\r\n        data:()=>({\r\n            content: undefined,\r\n            article:null,\r\n            loading: false\r\n        }),\r\n        async mounted() {\r\n            if(this.$refs['editor'] === undefined) return;\r\n            const Font = Quill.import('formats/font');\r\n            Font.whitelist = ['SimSun', 'SimHei','Microsoft-YaHei','KaiTi','FangSong','Arial','Times-New-Roman','sans-serif'];\r\n            Quill.register(Font, true);\r\n            Quill.register('modules/imageResize', ImageResize);\r\n            Quill.register('modules/imageDrop', ImageDrop);\r\n            this.quill = new Quill(this.$refs['editor'],{\r\n                scrollingContainer:this.$refs['editor'],\r\n                theme: 'snow',\r\n                modules: {\r\n                    imageDrop: true,\r\n                    imageResize: {\r\n                        modules: [ 'Resize', 'DisplaySize', 'Toolbar' ]\r\n                    },\r\n                    'toolbar': [\r\n                        [{ 'font': ['SimSun', 'SimHei','Microsoft-YaHei','KaiTi','FangSong','Arial','Times-New-Roman','sans-serif'] }, { 'size': [] }],\r\n                        [ 'bold', 'italic', 'underline', 'strike' ],\r\n                        [{ 'color': [] }, { 'background': [] }],\r\n                        [{ 'script': 'super' }, { 'script': 'sub' }],\r\n                        [{ 'header': '1' }, { 'header': '2' }, 'blockquote', 'code-block' ],\r\n                        [{ 'list': 'ordered' }, { 'list': 'bullet'}, { 'indent': '-1' }, { 'indent': '+1' }],\r\n                        [ {'direction': 'rtl'}, { 'align': [] }],\r\n                        [ 'link', 'image', 'video', 'formula' ],\r\n                        [ 'clean' ]\r\n                    ],\r\n                }\r\n            })\r\n            this.loading= true;\r\n            this.content = JSON.stringify((await StaticPageClient.getStaticPage(this.id)).data)\r\n            this.quill.setContents(JSON.parse(this.content))\r\n            this.article = await StaticPageClient.getStaticPageDto(this.id)\r\n            this.loading = false\r\n        },\r\n        methods:{\r\n            save:async function () {\r\n                this.loading = true\r\n                await StaticPageClient.updateEntry(JSON.stringify(this.quill.getContents()),this.id)\r\n                this.loading = false\r\n                this.$router.go(-1)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    @import \"~quill/dist/quill.snow.css\";\r\n    .center {\r\n        position: absolute;\r\n        top: 50%;\r\n        left:50%;\r\n        width: 100%;\r\n        transform: translate(-50%,-50%);\r\n    }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StaticEdit.vue?vue&type=template&id=e05add1c&scoped=true&\"\nimport script from \"./StaticEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./StaticEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StaticEdit.vue?vue&type=style&index=0&id=e05add1c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e05add1c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticEdit.vue?vue&type=style&index=0&id=e05add1c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaticEdit.vue?vue&type=style&index=0&id=e05add1c&scoped=true&lang=css&\""],"sourceRoot":""}