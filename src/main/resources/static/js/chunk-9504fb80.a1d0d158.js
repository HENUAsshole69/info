(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9504fb80"],{"06c5":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("25f0"),n("3ca3");var r=n("6b75");function i(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r["a"])(e,t):void 0}}},1964:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("editor-dialog")],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",[n("div",{ref:"editor"})])],1),n("v-row",[n("v-col",[n("v-btn",{on:{click:e.save}})],1)],1)],1)},o=[],s=(n("96cf"),n("1da1")),l=n("9339"),c=n.n(l),u=n("2966"),d={name:"RichTextEditor",props:{content:{type:String,default:void 0}},data:function(){return{quill:null}},model:{prop:"content",event:"update"},mounted:function(){var e=c.a.import("formats/font");e.whitelist=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman","sans-serif"],c.a.register(e,!0),this.quill=new c.a(this.$refs["editor"],{theme:"snow",modules:{toolbar:[[{font:["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman","sans-serif"]},{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"super"},{script:"sub"}],[{header:"1"},{header:"2"},"blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{direction:"rtl"},{align:[]}],["link","image","video","formula"],["clean"]]}}),void 0!==this.content&&this.quill.setContents(JSON.parse(this.content))},methods:{save:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("update",JSON.stringify(this.quill.getContents()));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},v=d,f=(n("7e84"),n("2877")),m=Object(f["a"])(v,a,o,!1,null,"22c9ab52",null),p=(m.exports,n("d893")),b=(n("2743"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{persistent:"","max-width":"600px"},on:{close:function(t){return e.$router.go(-1)},"click:outside":function(t){return e.$router.go(-1)}},model:{value:e.first,callback:function(t){e.first=t},expression:"first"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("新增")])]),n("v-card-text",[n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"标题",rules:e.nonEmptyRules,"hide-details":"auto"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),n("v-row",[n("v-col",[n("type-select",{on:{change:function(t){e.type=t}}})],1)],1),"EXHIBITION"===e.type?n("v-row",[n("v-col",[n("artifact-sub-type-select",{on:{change:function(t){e.subType=t}}})],1)],1):e._e(),"AUCTION"===e.type?n("v-row",[n("v-col",[n("auction-sub-type-select",{on:{change:function(t){e.subType=t}}})],1)],1):e._e(),"TAX_FREE"===e.type?n("v-row",[n("v-col",[n("v-text-field",{attrs:{rules:e.nonEmptyRules,label:"编号"},model:{value:e.registry,callback:function(t){e.registry=t},expression:"registry"}})],1),n("v-col",[n("v-text-field",{attrs:{rules:e.nonEmptyRules,label:"类型"},model:{value:e.wareHouseType,callback:function(t){e.wareHouseType=t},expression:"wareHouseType"}})],1),n("v-col",[n("v-text-field",{attrs:{rules:e.nonEmptyRules,label:"估值"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1):e._e()],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("关闭")]),n("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.toEdit}},[e._v("下一步")])],1)],1)],1),n("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.second,callback:function(t){e.second=t},expression:"second"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$router.go(-1)}}},[n("v-icon",[e._v("mdi-close")])],1),n("v-toolbar-title",[e._v("编辑")]),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},on:{click:e.submit}},[e._v("完成")])],1)],1),e.loading?n("div",{staticClass:"center"},[n("v-progress-circular",{staticClass:"center",attrs:{size:50,color:"primary",indeterminate:""}})],1):n("v-list",{attrs:{"three-line":"",subheader:""}},[n("v-list-item",[n("v-list-item-content",[n("div",{ref:"editor"})])],1)],1)],1)],1)],1)}),g=[],h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-select",{attrs:{items:e.items,label:"文物类型",rules:e.rules},on:{change:function(t){return e.$emit("change",t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}})},y=[],x={name:"ArtifactSubTypeSelect",data:function(){return{val:"PAINTING",items:[{value:"PAINTING",text:"书画"},{value:"PORCELAIN",text:"瓷器"},{value:"MISC",text:"其他"}],rules:[function(e){return void 0!==e||"不可不选"}]}},mounted:function(){this.$emit("change","PAINTING")}},k=x,w=Object(f["a"])(k,h,y,!1,null,"16e4427a",null),T=w.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-select",{attrs:{items:e.items,label:"拍卖类型",rules:e.rules},on:{change:function(t){return e.$emit("change",t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}})},I=[],N={name:"AuctionSubTypeSelect",data:function(){return{val:"SPRING_AUTUMN",items:[{value:"SPRING_AUTUMN",text:"春秋"},{value:"WANG_SU",text:"望塑"},{value:"ONLINE_AUCTION",text:"网拍"}],rules:[function(e){return void 0!==e||"不可不选"}]}},mounted:function(){this.$emit("change","SPRING_AUTUMN")}},O=N,E=Object(f["a"])(O,S,I,!1,null,"9cbf44b6",null),A=E.exports,_=n("f318"),R=n.n(_),j=n("2a19"),C={name:"EditorDialog",components:{AuctionSubTypeSelect:A,ArtifactSubTypeSelect:T,TypeSelect:p["a"]},data:function(){return{content:void 0,valid:!1,nonEmptyRules:[function(e){return!!e||"不得为空"}],first:!0,second:!1,title:"",type:"NEWS",subType:null,quill:null,loading:!1,wareHouseType:void 0,value:void 0,registry:void 0}},created:function(){"ADMIN"!==this.$store.state.userObj.type&&(this.type="EXHIBITION")},methods:{toEdit:function(){this.first=!1,this.second=!0},submit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,null,void 0===e.wareHouseType||void 0===e.value||void 0===e.registry){t.next=8;break}return t.next=5,u["a"].postEntryTaxFree(e.quill.getContents(),e.title,e.wareHouseType,e.value,e.registry);case 5:t.sent,t.next=17;break;case 8:if(null!==e.subType){t.next=14;break}return t.next=11,u["a"].postEntry(JSON.stringify(e.quill.getContents()),e.title,e.type);case 11:t.sent,t.next=17;break;case 14:return t.next=16,u["a"].postEntryWithSubType(JSON.stringify(e.quill.getContents()),e.title,e.type,e.subType);case 16:t.sent;case 17:return console.log(e.subType),t.next=20,e.$router.go(-1);case 20:case"end":return t.stop()}}),t)})))()}},updated:function(){if(void 0!==this.$refs["editor"]){var e=c.a.import("formats/font");e.whitelist=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman","sans-serif"],c.a.register(e,!0),c.a.register("modules/imageResize",R.a),c.a.register("modules/imageDrop",j["a"]),this.quill=new c.a(this.$refs["editor"],{theme:"snow",modules:{imageDrop:!0,imageResize:{modules:["Resize","DisplaySize","Toolbar"]},toolbar:[[{font:["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman","sans-serif"]},{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"super"},{script:"sub"}],[{header:"1"},{header:"2"},"blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{direction:"rtl"},{align:[]}],["link","image","video","formula"],["clean"]]}})}}},$=C,H=(n("444f"),Object(f["a"])($,b,g,!1,null,"7d7e830e",null)),P=H.exports,U={name:"NewArticle",components:{EditorDialog:P}},B=U,M=Object(f["a"])(B,r,i,!1,null,"48c95b0d",null);t["default"]=M.exports},2743:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-system-bar",{attrs:{"lights-out":""}}),n("v-carousel",{key:e.key,attrs:{continuous:!1,"hide-delimiter-background":""}},e._l(e.images,(function(e,t){return n("v-carousel-item",{key:t,attrs:{src:e}})})),1),n("v-list",{attrs:{"two-line":""}},[n("v-list-item",[n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("pic-input",{on:{change:function(t){e.picB64=t}}})],1)],1),n("v-list-item",[n("v-btn",{attrs:{disabled:!e.valid},on:{click:e.newCover}},[e._v(" 上传 ")]),n("v-btn",{attrs:{disabled:0===e.images.length},on:{click:e.clearCover}},[e._v(" 清空 ")])],1)],1)],1)},i=[],a=(n("96cf"),n("1da1")),o=n("ee6c"),s=n("2966"),l={name:"CoverEditor",components:{PicInput:o["a"]},props:{id:String},data:function(){return{picB64:null,images:[],key:0,valid:!1}},beforeMount:function(){this.loadPic(0)},methods:{loadPic:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this.images,e.next=4,s["a"].getCover(this.id,t);case 4:return e.t1=e.sent,e.t2="data:image/jpeg;base64,"+e.t1,e.t0.push.call(e.t0,e.t2),e.next=9,this.loadPic(t+1);case 9:e.next=14;break;case 11:e.prev=11,e.t3=e["catch"](0),console.log(this.images);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}(),newCover:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=console,t.next=3,s["a"].postCover(e.id,e.picB64);case 3:return t.t1=t.sent,t.t0.log.call(t.t0,t.t1),e.images.length=0,t.next=8,e.loadPic(0);case 8:case"end":return t.stop()}}),t)})))()},clearCover:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].delCover(e.id);case 2:e.images.length=0,e.key++;case 4:case"end":return t.stop()}}),t)})))()}}},c=l,u=n("2877"),d=Object(u["a"])(c,r,i,!1,null,"cf4ee98a",null);t["a"]=d.exports},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("6b75");function i(e){if(Array.isArray(e))return Object(r["a"])(e)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function a(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var o=n("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return i(e)||a(e)||Object(o["a"])(e)||s()}},"37b7":function(e,t,n){},"444f":function(e,t,n){"use strict";var r=n("d691"),i=n.n(r);i.a},"6b75":function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},"7e84":function(e,t,n){"use strict";var r=n("37b7"),i=n.n(r);i.a},d691:function(e,t,n){},d893:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-select",{attrs:{items:e.items,label:"类型",rules:e.rules},on:{change:function(t){return e.$emit("change",t)}},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}})},i=[],a=(n("4de4"),n("2909")),o={name:"TypeSelect",data:function(){return{val:"NEWS",items:[{value:"NEWS",text:"要闻"},{value:"ACTIVITY",text:"活动"},{value:"POLICY",text:"政策"},{value:"ANNOUNCE",text:"公告"},{value:"TAX_FREE",text:"保税仓储"},{value:"EXHIBITION",text:"展览展示"},{value:"AUCTION",text:"拍卖"},{value:"EXHIBITION_INFO",text:"展讯"}],rules:[function(e){return void 0!==e||"不可不选"}]}},created:function(){if("ADMIN"!==this.$store.state.userObj.type){var e,t=this.items.filter((function(e){return"EXHIBITION"===e.value||"AUCTION"===e.value}));this.items.length=0,(e=this.items).push.apply(e,Object(a["a"])(t)),this.val="EXHIBITION"}}},s=o,l=n("2877"),c=Object(l["a"])(s,r,i,!1,null,"6230e5bf",null);t["a"]=c.exports},ee6c:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp",placeholder:"选择图片","prepend-icon":"mdi-camera",hint:"请选择图片",label:"图片",rules:e.picRules},on:{change:function(t){return e.picToBase64(t)}}})},i=[],a={name:"PicInput",data:function(){return{picRules:[function(e){return void 0!==e||"图片不可不选"}]}},methods:{picToBase64:function(e){var t=this,n=e,r=new FileReader;r.onload=function(e){return function(e){var n=e.target.result;t.$emit("change",n)}}(),r.readAsArrayBuffer(n)}}},o=a,s=n("2877"),l=Object(s["a"])(o,r,i,!1,null,"2c226b02",null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-9504fb80.a1d0d158.js.map